(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{3733:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(6483)}])},6483:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var r=t(4051),s=t.n(r),a=t(5893),c=t(7294),i=t(8033),u=t.n(i),o=t(2176),l=t(5813),f=t(2854);function h(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function d(e,n,t,r,s,a,c){try{var i=e[a](c),u=i.value}catch(o){return void t(o)}i.done?n(u):Promise.resolve(u).then(r,s)}function v(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function c(e){d(a,r,s,c,i,"next",e)}function i(e){d(a,r,s,c,i,"throw",e)}c(void 0)}))}}function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,s,a=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);c=!0);}catch(u){i=!0,s=u}finally{try{c||null==t.return||t.return()}finally{if(i)throw s}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return h(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){var n=e.setTitle,t=e.checkToken,r=e.serverUri;return c.useEffect((function(){n("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")}),[n,r]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{checkToken:t,defaultServerUri:r}),(0,a.jsx)(_,{checkToken:t,defaultServerUri:r})]})}var k="t.SDIFGUIUbidsGIDBSG-BKMXCJKjgdfgKDSRHGd-HDFHnbdddfg",m=function(e){var n=e.checkToken,t=e.defaultServerUri,r=p(c.useState(),2),i=r[0],h=r[1],d=p(c.useState(!0),2),x=d[0],k=d[1];(0,c.useEffect)((function(){h(t)}),[t]);var m=p(c.useState(),2),_=m[0],g=m[1],S=c.useCallback((function(e){var n=e.target.value;n&&("/"===n.slice(-1)&&(n=n.slice(0,n.length-1)),h(n))}),[]);c.useEffect((function(){var e=function(){var e=v(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l._p)(i);case 2:n=e.sent,g(!n),k(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[_,i]);var b=c.useCallback(function(){var e=v(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),k(!0),e.next=4,(0,l._p)(i);case 4:e.sent?(g(!1),(0,f.tL)("serverUri",i)):g(!0),k(!1),n();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[i,n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.l0,{className:u().SettingsForm,onSubmit:b,children:[(0,a.jsx)(o.R9,{children:(0,a.jsx)("h4",{children:"\u0421\u0435\u0440\u0432\u0435\u0440 \u0442\u043e\u0440\u0433\u043e\u0432\u043e\u0433\u043e \u0440\u043e\u0431\u043e\u0442\u0430"})}),(0,a.jsxs)(o.cw,{className:u().label,children:[(0,a.jsxs)(o.__,{children:["Server ",(0,a.jsx)("a",{href:"https://github.com/pskucherov/TinkoffTradingBot",target:"_blank",rel:"noreferrer",children:"(?)"})]}),(0,a.jsx)(o.II,{name:"serveruri",placeholder:i,onChange:S,value:i,invalid:_,valid:!1===_}),(0,a.jsx)(o.AG,{children:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d."})]}),x?(0,a.jsx)(o.$j,{size:"sm",color:"primary"}):(0,a.jsx)(o.zx,{className:u().Submit,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})},_=function(e){var n=e.checkToken,t=e.defaultServerUri,r=p(c.useState(k),2),i=r[0],f=r[1],h=p(c.useState(!1),2),d=h[0],x=h[1],m=p(c.useState(!1),2),_=m[0],S=m[1],b=c.useCallback(function(){var e=v(s().mark((function e(r){var a,c,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),a=r.target[0].value,x(!a||a===k),d||S(!0),e.next=6,(0,l.Z6)(t,a);case 6:c=e.sent,i=!c||c.error,x(i),i||f(a),S(!1),n();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[d,n,t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.l0,{className:u().SettingsForm,onSubmit:b,children:[(0,a.jsx)(o.R9,{children:(0,a.jsx)("h4",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c Token"})}),(0,a.jsxs)(o.cw,{className:u().label,children:[(0,a.jsxs)(o.__,{children:["Token ",(0,a.jsx)("a",{href:"https://tinkoff.github.io/investAPI/token/",target:"_blank",rel:"noreferrer",children:"(?)"})]}),(0,a.jsx)(o.II,{name:"token",placeholder:i,invalid:d}),(0,a.jsx)(o.AG,{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 token."})]}),_?(0,a.jsx)(o.$j,{size:"sm",color:"primary"}):(0,a.jsx)(o.zx,{className:u().Submit,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),(0,a.jsx)(g,{token:i,checkToken:n,defaultServerUri:t})]})},g=function(e){var n=undefined,t=e.token,r=e.checkToken,i=e.defaultServerUri,f=p(c.useState([]),2),h=f[0],d=f[1],x=c.useCallback(function(){var e=v(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.lz)(i);case 2:t=e.sent,(n||t&&t.length!==h.length)&&d(t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[h.length,i]);c.useEffect((function(){x()}),[t,x]);var k=c.useCallback(function(){var e=v(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.b9)(i,n);case 2:return e.next=4,x();case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,x,i]),m=c.useCallback(function(){var e=v(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.rK)(i,n);case 2:return e.next=4,x(!0);case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,x,i]);return Boolean(h&&h.length)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.l0,{className:u().SettingsForm,children:[(0,a.jsx)(o.R9,{children:(0,a.jsx)("h4",{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0442\u043e\u043a\u0435\u043d\u044b"})}),h&&h.map((function(e,t){return(0,a.jsxs)(o.cw,{className:u().Tokens,children:[(0,a.jsx)(o.__,{className:u().TokenLable,children:e.token.substr(0,5)}),e.isSandbox&&(0,a.jsx)(o.Ct,{pill:!0,className:u().Badge,children:"Sandbox"}),(0,a.jsx)(o.zx,{className:u().DeleteButton,onClick:k.bind(n,e.token),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,a.jsx)(o.zx,{className:u().SelectButton,onClick:m.bind(n,e.token),disabled:e.selected,children:e.selected?"\u0412\u044b\u0431\u0440\u0430\u043d\xa0":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"})]},t)}))]})})}},8033:function(e){e.exports={SettingsForm:"Settings_SettingsForm__l9GmX",label:"Settings_label__cbtIW",Tokens:"Settings_Tokens__1CJuO",TokenLable:"Settings_TokenLable__BGmdA",SelectButton:"Settings_SelectButton__PLbxe",DeleteButton:"Settings_DeleteButton__nOHZz",LogsButton:"Settings_LogsButton__q3BOS",Badge:"Settings_Badge__MPwCV"}}},function(e){e.O(0,[774,888,179],(function(){return n=3733,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
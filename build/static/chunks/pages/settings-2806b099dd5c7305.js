(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{3733:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(6483)}])},6483:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return x}});var r=t(4051),s=t.n(r),a=t(5893),c=t(7294),i=t(8033),o=t.n(i),u=t(2176),l=t(5813);t(4675);function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function h(e,n,t,r,s,a,c){try{var i=e[a](c),o=i.value}catch(u){return void t(u)}i.done?n(o):Promise.resolve(o).then(r,s)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,s){var a=e.apply(n,t);function c(e){h(a,r,s,c,i,"next",e)}function i(e){h(a,r,s,c,i,"throw",e)}c(void 0)}))}}function p(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,s,a=[],c=!0,i=!1;try{for(t=t.call(e);!(c=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);c=!0);}catch(o){i=!0,s=o}finally{try{c||null==t.return||t.return()}finally{if(i)throw s}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return f(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){var n=e.setTitle,t=e.checkToken;return c.useEffect((function(){n("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")}),[n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{checkToken:t}),(0,a.jsx)(_,{checkToken:t})]})}var k="t.SDIFGUIUbidsGIDBSG-BKMXCJKjgdfgKDSRHGd-HDFHnbdddfg",m="http://localhost:8000/",v=function(e){var n=e.checkToken,t=p(c.useState(m),2),r=t[0],i=t[1],f=p(c.useState(!0),2),h=f[0],x=f[1],k=p(c.useState(),2),v=k[0],_=k[1],g=c.useCallback((function(e){i(e.target.value)}),[]);c.useEffect((function(){var e=function(){var e=d(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l._p)(r);case 2:n=e.sent,_(!n),x(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[v,r]);var b=c.useCallback(function(){var e=d(s().mark((function e(t){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(!0),e.next=4,(0,l._p)(r);case 4:a=e.sent,_(!a),x(!1),n();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(u.l0,{className:o().SettingsForm,onSubmit:b,children:[(0,a.jsx)(u.R9,{children:(0,a.jsx)("h4",{children:"\u0421\u0435\u0440\u0432\u0435\u0440 \u0442\u043e\u0440\u0433\u043e\u0432\u043e\u0433\u043e \u0440\u043e\u0431\u043e\u0442\u0430"})}),(0,a.jsxs)(u.cw,{className:o().label,children:[(0,a.jsxs)(u.__,{children:["Server ",(0,a.jsx)("a",{href:"https://github.com/pskucherov/TinkoffTradingBot",target:"_blank",rel:"noreferrer",children:"(?)"})]}),(0,a.jsx)(u.II,{name:"serveruri",placeholder:r,onChange:g,value:r,invalid:v,valid:!1===v}),(0,a.jsx)(u.AG,{children:"\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d."})]}),h?(0,a.jsx)(u.$j,{size:"sm",color:"primary"}):(0,a.jsx)(u.zx,{className:o().Submit,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})},_=function(e){var n=e.checkToken,t=p(c.useState(k),2),r=t[0],i=t[1],f=p(c.useState(!1),2),h=f[0],x=f[1],v=p(c.useState(!1),2),_=v[0],b=v[1],j=c.useCallback(function(){var e=d(s().mark((function e(t){var r,a,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=t.target[0].value,x(!r||r===k),h||b(!0),e.next=6,(0,l.Z6)(m,r);case 6:a=e.sent,c=!a||a.error,x(c),c||i(r),b(!1),n();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[h,n]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.l0,{className:o().SettingsForm,onSubmit:j,children:[(0,a.jsx)(u.R9,{children:(0,a.jsx)("h4",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c Token"})}),(0,a.jsxs)(u.cw,{className:o().label,children:[(0,a.jsxs)(u.__,{children:["Token ",(0,a.jsx)("a",{href:"https://tinkoff.github.io/investAPI/token/",target:"_blank",rel:"noreferrer",children:"(?)"})]}),(0,a.jsx)(u.II,{name:"token",placeholder:r,invalid:h}),(0,a.jsx)(u.AG,{children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 token."})]}),_?(0,a.jsx)(u.$j,{size:"sm",color:"primary"}):(0,a.jsx)(u.zx,{className:o().Submit,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]}),(0,a.jsx)(g,{token:r,checkToken:n})]})},g=function(e){var n=undefined,t=e.token,r=e.checkToken,i=p(c.useState([]),2),f=i[0],h=i[1],x=c.useCallback(function(){var e=d(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.lz)(m);case 2:t=e.sent,(n||t&&t.length!==f.length)&&h(t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[f.length]);c.useEffect((function(){x()}),[t,x]);var k=c.useCallback(function(){var e=d(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.b9)(m,n);case 2:return e.next=4,x();case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,x]),v=c.useCallback(function(){var e=d(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.rK)(m,n);case 2:return e.next=4,x(!0);case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[r,x]);return Boolean(f&&f.length)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(u.l0,{className:o().SettingsForm,children:[(0,a.jsx)(u.R9,{children:(0,a.jsx)("h4",{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0442\u043e\u043a\u0435\u043d\u044b"})}),f&&f.map((function(e,t){return(0,a.jsxs)(u.cw,{className:o().Tokens,children:[(0,a.jsx)(u.__,{className:o().TokenLable,children:e.token.substr(0,5)}),e.isSandbox&&(0,a.jsx)(u.Ct,{pill:!0,className:o().Badge,children:"Sandbox"}),(0,a.jsx)(u.zx,{className:o().DeleteButton,onClick:k.bind(n,e.token),children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,a.jsx)(u.zx,{className:o().SelectButton,onClick:v.bind(n,e.token),disabled:e.selected,children:e.selected?"\u0412\u044b\u0431\u0440\u0430\u043d\xa0":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"})]},t)}))]})})}},8033:function(e){e.exports={SettingsForm:"Settings_SettingsForm__l9GmX",label:"Settings_label__cbtIW",Tokens:"Settings_Tokens__1CJuO",TokenLable:"Settings_TokenLable__BGmdA",SelectButton:"Settings_SelectButton__PLbxe",DeleteButton:"Settings_DeleteButton__nOHZz",LogsButton:"Settings_LogsButton__q3BOS",Badge:"Settings_Badge__MPwCV"}}},function(e){e.O(0,[774,888,179],(function(){return n=3733,e(e.s=n);var n}));var n=e.O();_N_E=n}]);